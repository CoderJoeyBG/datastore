<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roblox DataStore Security Guide</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@300;400;500;600;700&display=swap');
        
        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #111111;
            --bg-card: rgba(18, 18, 18, 0.8);
            --bg-glass: rgba(255, 255, 255, 0.03);
            --bg-glass-hover: rgba(255, 255, 255, 0.08);
            --border-primary: rgba(255, 255, 255, 0.1);
            --border-secondary: rgba(255, 255, 255, 0.05);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --text-muted: rgba(255, 255, 255, 0.5);
            --accent-blue: #00d4ff;
            --accent-purple: #8b5cf6;
            --accent-pink: #ec4899;
            --accent-green: #10b981;
            --accent-orange: #f59e0b;
            --accent-red: #ef4444;
            --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-danger: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
            --gradient-success: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            --gradient-warning: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 8px 25px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 20px 40px rgba(0, 0, 0, 0.5);
            --shadow-glow: 0 0 50px rgba(102, 126, 234, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.7;
            color: var(--text-primary);
            background: var(--bg-primary);
            min-height: 100vh;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(102, 126, 234, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(236, 72, 153, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: -2;
        }

        .grain-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.03;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><filter id="noiseFilter"><feTurbulence type="fractalNoise" baseFrequency="0.85" numOctaves="4" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noiseFilter)" opacity="0.4"/></svg>');
            pointer-events: none;
            z-index: -1;
        }

        .floating-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: var(--accent-blue);
            border-radius: 50%;
            animation: float 8s ease-in-out infinite;
            opacity: 0.6;
        }

        .particle:nth-child(1) { top: 10%; left: 20%; animation-delay: 0s; background: var(--accent-purple); }
        .particle:nth-child(2) { top: 70%; left: 80%; animation-delay: 2s; background: var(--accent-pink); }
        .particle:nth-child(3) { top: 40%; right: 10%; animation-delay: 4s; background: var(--accent-green); }
        .particle:nth-child(4) { bottom: 20%; left: 60%; animation-delay: 6s; background: var(--accent-orange); }

        @keyframes float {
            0%, 100% { transform: translateY(0px) translateX(0px) scale(1); opacity: 0.6; }
            33% { transform: translateY(-20px) translateX(10px) scale(1.2); opacity: 0.8; }
            66% { transform: translateY(10px) translateX(-10px) scale(0.8); opacity: 0.4; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header {
            background: var(--bg-glass);
            backdrop-filter: blur(40px);
            border: 1px solid var(--border-primary);
            border-radius: 32px;
            padding: 80px 60px;
            margin: 40px 0 60px;
            box-shadow: var(--shadow-lg), var(--shadow-glow);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, rgba(102, 126, 234, 0.1), transparent, rgba(139, 92, 246, 0.1), transparent);
            animation: rotate 20s linear infinite;
        }

        .header::after {
            content: '';
            position: absolute;
            inset: 1px;
            background: var(--bg-primary);
            border-radius: 31px;
            z-index: -1;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .header-content {
            position: relative;
            z-index: 2;
        }

        .header h1 {
            font-size: clamp(3rem, 8vw, 5rem);
            font-weight: 900;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple), var(--accent-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 24px;
            letter-spacing: -0.05em;
            text-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);
        }

        .header .subtitle {
            font-size: 1.375rem;
            color: var(--text-secondary);
            max-width: 800px;
            margin: 0 auto;
            font-weight: 400;
            line-height: 1.6;
        }

        .nav-container {
            position: sticky;
            top: 20px;
            z-index: 1000;
            margin-bottom: 60px;
        }

        .nav {
            background: var(--bg-glass);
            backdrop-filter: blur(40px);
            border: 1px solid var(--border-primary);
            border-radius: 24px;
            padding: 16px 24px;
            box-shadow: var(--shadow-md);
        }

        .nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            align-items: center;
        }

        .nav a {
            color: var(--text-secondary);
            text-decoration: none;
            padding: 12px 20px;
            border-radius: 16px;
            font-weight: 500;
            font-size: 0.95rem;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: var(--bg-glass);
            border: 1px solid var(--border-secondary);
            position: relative;
            overflow: hidden;
        }

        .nav a::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .nav a:hover {
            color: var(--text-primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
            border-color: var(--border-primary);
        }

        .nav a:hover::before {
            opacity: 0.1;
        }

        .section {
            background: var(--bg-glass);
            backdrop-filter: blur(40px);
            border: 1px solid var(--border-primary);
            border-radius: 32px;
            padding: 60px;
            margin-bottom: 60px;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }

        .section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent-blue), transparent);
        }

        .section h2 {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 32px;
            display: flex;
            align-items: center;
            gap: 16px;
            letter-spacing: -0.02em;
        }

        .section h3 {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--text-primary);
            margin: 48px 0 24px 0;
            display: flex;
            align-items: center;
            gap: 16px;
            letter-spacing: -0.01em;
        }

        .section p {
            color: var(--text-secondary);
            font-size: 1.125rem;
            line-height: 1.8;
            margin-bottom: 24px;
        }

        .impact-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 18px;
            border-radius: 50px;
            font-size: 0.875rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border: 1px solid;
        }

        .critical-risk {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(220, 38, 38, 0.1));
            color: var(--accent-red);
            border-color: rgba(239, 68, 68, 0.3);
            box-shadow: 0 4px 20px rgba(239, 68, 68, 0.2);
        }

        .high-risk {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.15), rgba(217, 119, 6, 0.1));
            color: var(--accent-orange);
            border-color: rgba(245, 158, 11, 0.3);
            box-shadow: 0 4px 20px rgba(245, 158, 11, 0.2);
        }

        .medium-risk {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(5, 150, 105, 0.1));
            color: var(--accent-green);
            border-color: rgba(16, 185, 129, 0.3);
            box-shadow: 0 4px 20px rgba(16, 185, 129, 0.2);
        }

        .low-risk {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.15), rgba(56, 189, 248, 0.1));
            color: var(--accent-blue);
            border-color: rgba(0, 212, 255, 0.3);
            box-shadow: 0 4px 20px rgba(0, 212, 255, 0.2);
        }

        .example-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 32px;
            margin: 32px 0;
        }

        .vulnerability-example, .patch-example {
            border-radius: 24px;
            padding: 32px;
            position: relative;
            backdrop-filter: blur(20px);
            border: 1px solid;
            overflow: hidden;
        }

        .vulnerability-example {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.08), rgba(220, 38, 38, 0.04));
            border-color: rgba(239, 68, 68, 0.2);
        }

        .patch-example {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.08), rgba(5, 150, 105, 0.04));
            border-color: rgba(16, 185, 129, 0.2);
        }

        .example-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
            font-weight: 700;
            font-size: 1.25rem;
        }

        .vulnerability-example .example-header {
            color: var(--accent-red);
        }

        .patch-example .example-header {
            color: var(--accent-green);
        }

        .code-window {
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            margin: 20px 0;
        }

        .code-header {
            background: #161b22;
            border-bottom: 1px solid #30363d;
            padding: 16px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .code-dots {
            display: flex;
            gap: 8px;
        }

        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .dot.red { background: #ff5f57; }
        .dot.yellow { background: #ffbd2e; }
        .dot.green { background: #28ca42; }

        .code-lang {
            background: linear-gradient(135deg, #58a6ff, #1f6feb);
            color: white;
            padding: 6px 14px;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: 600;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            font-family: 'JetBrains Mono', monospace;
        }

        .code-content {
            padding: 28px;
            overflow-x: auto;
            background: #0d1117;
        }

        .code-content code {
            display: block;
            font-family: 'JetBrains Mono', 'Fira Code', monospace;
            font-size: 0.95rem;
            line-height: 1.7;
            color: #f0f6fc;
            white-space: pre;
        }

        /* Enhanced Syntax Highlighting */
        .keyword { color: #ff7b72; font-weight: 600; }
        .string { color: #a5d6ff; }
        .comment { color: #8b949e; font-style: italic; opacity: 0.8; }
        .function { color: #d2a8ff; font-weight: 500; }
        .number { color: #79c0ff; }
        .operator { color: #ff7b72; }
        .variable { color: #ffa657; font-weight: 500; }
        .property { color: #7ee787; }
        .bracket { color: #c9d1d9; }

        .security-insights {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin: 40px 0;
        }

        .insight-card {
            background: var(--bg-glass);
            border: 1px solid var(--border-primary);
            border-radius: 20px;
            padding: 28px;
            backdrop-filter: blur(20px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .insight-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-purple), var(--accent-pink));
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .insight-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
            border-color: var(--border-primary);
        }

        .insight-card:hover::before {
            opacity: 1;
        }

        .insight-icon {
            width: 56px;
            height: 56px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
        }

        .insight-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
        }

        .insight-description {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .comprehensive-framework {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(102, 126, 234, 0.05));
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 28px;
            padding: 48px;
            margin: 48px 0;
            position: relative;
        }

        .comprehensive-framework::before {
            content: 'üõ°Ô∏è';
            position: absolute;
            top: 24px;
            right: 24px;
            font-size: 3rem;
            opacity: 0.3;
        }

        .framework-title {
            font-size: 2rem;
            font-weight: 800;
            color: var(--accent-purple);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .testing-section {
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(56, 189, 248, 0.05));
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 28px;
            padding: 48px;
            margin: 48px 0;
        }

        .footer {
            background: var(--bg-glass);
            backdrop-filter: blur(40px);
            border: 1px solid var(--border-primary);
            border-radius: 32px;
            padding: 60px;
            text-align: center;
            margin: 60px 0 40px;
            position: relative;
            overflow: hidden;
        }

        .footer::before {
            content: '';
            position: absolute;
            top: -100%;
            left: -100%;
            width: 300%;
            height: 300%;
            background: radial-gradient(circle, rgba(102, 126, 234, 0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.5; }
            50% { transform: scale(1.1) rotate(180deg); opacity: 0.8; }
        }

        .footer-content {
            position: relative;
            z-index: 2;
        }

        .footer h3 {
            color: var(--text-primary);
            font-size: 2rem;
            margin-bottom: 16px;
            font-weight: 700;
        }

        .footer p {
            color: var(--text-secondary);
            font-size: 1.125rem;
            line-height: 1.7;
            margin-bottom: 12px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .section {
                padding: 40px;
            }
            
            .header {
                padding: 60px 40px;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 16px;
            }
            
            .section {
                padding: 32px 24px;
            }
            
            .header {
                padding: 48px 32px;
                margin: 20px 0 40px;
            }
            
            .header h1 {
                font-size: 2.5rem;
            }
            
            .nav ul {
                flex-direction: column;
                gap: 12px;
            }
            
            .nav a {
                text-align: center;
                width: 100%;
            }

            .example-container {
                gap: 24px;
            }

            .code-header {
                padding: 12px 20px;
            }

            .code-content {
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .section h2 {
                font-size: 1.875rem;
            }

            .section h3 {
                font-size: 1.5rem;
            }
        }

        /* Smooth scrolling for anchor links */
        html {
            scroll-padding-top: 100px;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-primary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--border-secondary);
        }
    </style>
</head>
<body>
    <div class="grain-overlay"></div>
    
    <div class="floating-particles">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>

    <div class="container">
        <div class="header">
            <div class="header-content">
                <h1>Roblox DataStore Security</h1>
                <p class="subtitle">Master the art of protecting your game's data from exploits with comprehensive vulnerability analysis and battle-tested defense strategies</p>
            </div>
        </div>

        <div class="nav-container">
            <nav class="nav">
                <ul>
                    <li><a href="#type-validation">üõ°Ô∏è Type Validation</a></li>
                    <li><a href="#string-attacks">üî§ String Attacks</a></li>
                    <li><a href="#size-limits">üìè Size Limits</a></li>
                    <li><a href="#advanced-attacks">üéØ Advanced Vectors</a></li>
                    <li><a href="#framework">üîß Complete Framework</a></li>
                    <li><a href="#testing">üß™ Testing Suite</a></li>
                </ul>
            </nav>
        </div>

        <section class="section" id="type-validation">
            <h2>üõ°Ô∏è Type Validation Exploits</h2>
            
            <h3>Instance & Userdata Injection <span class="impact-badge critical-risk">üî¥ Critical Risk</span></h3>
            <p>The most common and devastating attack vector. Exploiters inject Roblox instances or userdata objects into remote events, causing DataStore save operations to fail. When your game attempts to persist player data containing these objects, the operation throws an error, effectively preventing any progress from being saved.</p>

            <div class="example-container">
                <div class="vulnerability-example">
                    <div class="example-header">
                        üö® Vulnerable Code Examples
                    </div>
                    <div class="code-window">
                        <div class="code-header">
                            <div class="code-dots">
                                <div class="dot red"></div>
                                <div class="dot yellow"></div>
                                <div class="dot green"></div>
                            </div>
                            <div class="code-lang">Lua</div>
                        </div>
                        <div class="code-content">
                            <code><span class="comment">-- Example 1: Color picker vulnerability</span>
<span class="keyword">local</span> <span class="function">buyItemEvent</span> = ReplicatedStorage.BuyItem

buyItemEvent.OnServerEvent:<span class="function">Connect</span>(<span class="keyword">function</span><span class="bracket">(</span>player, itemType, itemData<span class="bracket">)</span>
    <span class="comment">-- No validation - dangerous!</span>
    player.Data.Items[itemData.Name] = <span class="bracket">{</span>
        <span class="property">Color</span> = itemData.Color,  <span class="comment">-- Exploiter sends workspace</span>
        <span class="property">Material</span> = itemData.Material,
        <span class="property">Price</span> = itemData.Price
    <span class="bracket">}</span>
    
    <span class="comment">-- DataStore will fail to save workspace object</span>
    <span class="function">savePlayerData</span><span class="bracket">(</span>player<span class="bracket">)</span>
<span class="keyword">end</span><span class="bracket">)</span>

<span class="comment">-- Example 2: Canvas update vulnerability</span>
<span class="keyword">local</span> updateCanvasEvent = ReplicatedStorage.UpdateCanvas

updateCanvasEvent.OnServerEvent:<span class="function">Connect</span>(<span class="keyword">function</span><span class="bracket">(</span>player, canvasId, imageId<span class="bracket">)</span>
    <span class="comment">-- Direct assignment without checking if imageId is a number</span>
    player.Data.Canvases[canvasId].ImageId = imageId  <span class="comment">-- Could be workspace!</span>
    <span class="function">savePlayerData</span><span class="bracket">(</span>player<span class="bracket">)</span>
<span class="keyword">end</span><span class="bracket">)</span>

<span class="comment">-- Exploiter's attack payloads</span>
BuyItem:<span class="function">InvokeServer</span><span class="bracket">(</span><span class="string">"Painting"</span>, <span class="bracket">{</span>
    Name = <span class="string">"Mona Lisa"</span>,
    Color = <span class="variable">workspace</span>,  <span class="comment">-- Instance instead of Color3</span>
    Material = <span class="string">"Neon"</span>,
    Price = <span class="number">500</span>
<span class="bracket">}</span><span class="bracket">)</span>

UpdateCanvas:<span class="function">FireServer</span><span class="bracket">(</span><span class="number">1</span>, <span class="variable">workspace</span><span class="bracket">)</span>  <span class="comment">-- Instance instead of number</span></code>
                        </div>
                    </div>
                </div>

                <div class="patch-example">
                    <div class="example-header">
                        ‚úÖ Bulletproof Defense Implementation
                    </div>
                    <div class="code-window">
                        <div class="code-header">
                            <div class="code-dots">
                                <div class="dot red"></div>
                                <div class="dot yellow"></div>
                                <div class="dot green"></div>
                            </div>
                            <div class="code-lang">Lua</div>
                        </div>
                        <div class="code-content">
                            <code><span class="comment">-- Advanced Type Validation Module</span>
<span class="keyword">local</span> TypeValidator = <span class="bracket">{}</span>

<span class="comment">-- Comprehensive type checking with detailed error messages</span>
<span class="function">TypeValidator.validateItemData</span> = <span class="keyword">function</span><span class="bracket">(</span>data<span class="bracket">)</span>
    <span class="comment">-- Ensure data is a table</span>
    <span class="keyword">if</span> <span class="function">type
